<div class="container">
  <button type="button" (click)="showNewAnalysisDialog()"
          class="btn btn-outline-primary animated slow fadeInDown btn-block m-4"><i class="fa fa-plus"></i> Add New
    Analysis
  </button>
</div>
<div class="container-fluid">
  <p-table #dt1 [columns]="cols" [value]="allMatches" [paginator]="true" [rows]="10" dataKey="id"
           [resizableColumns]="true"
           [reorderableColumns]="true"
           stateStorage="session" stateKey="statedemo-session">
    <ng-template pTemplate="header" let-columns>
      <tr>
        <th *ngFor="let col of columns" [pSortableColumn]="col.field" pResizableColumn pReorderableColumn>
          {{col.header}}
          <p-sortIcon [field]="col.field"></p-sortIcon>
        </th>
        <th>Actions</th>
      </tr>
      <tr>
        <th *ngFor="let col of columns" [ngSwitch]="col.field" class="ui-fluid">
          <input class="form-control" type="text"
                 (input)="dt1.filter($event.target.value, col.field, col.filterMatchMode)"
                 [value]="dt1.filters[col.field]?.value">
        </th>
        <th></th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-rowData let-columns="columns">
      <tr>
        <td *ngFor="let col of columns">
          {{rowData[col.field]}}
        </td>
        <td>
          <div class="row">
            <div class="col-md-4 text-center">
              <button class="btn btn-outline-primary " title="Go To Match"><i class="fas fa-desktop"></i></button>
            </div>
            <div class="col-md-4 text-center">
              <button class="btn btn-outline-secondary" title="Go To Report"><i class="fas fa-print"></i></button>
            </div>
            <div class="col-md-4 text-center">
              <button class="btn btn-outline-danger" title="Delete"><i class="fas fa-trash-alt"></i></button>
            </div>
          </div>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>
<p-dialog header="New Analysis" [(visible)]="displayNewAnalysis" [modal]="true" [responsive]="true" [minY]="70"
          [baseZIndex]="10000" [style]="{width: '900px', minWidth: '800px'}">
  <mat-horizontal-stepper labelPosition="bottom" #stepper>
    <mat-step>
      <form>
        <ng-template matStepLabel>Match Data</ng-template>
        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <label for="matchDate">Match Date</label>
              <input type="date" name="matchDate" [(ngModel)]="matchesService.match.matchDate" #matchDate="ngModel"
                     class="form-control" id="matchDate" required>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label for="actionStatement">Select Your Action Statement</label>
              <select class="form-control" id="actionStatement" [(ngModel)]="matchesService.match.groupId"
                      #groupId="ngModel"
                      name="groupId">
                <option disabled>Please Select Action Statement</option>
                <option *ngFor="let group of allGroups" [value]="group.id">{{group.nameAr}}</option>
              </select>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label for="clubA">Select Club A</label>
              <select #selectedClubA class="form-control" id="clubA" (change)="getAllTeams(selectedClubA.value, true)">
                <option disabled>Please Select Club A</option>
                <option *ngFor="let club of allClubs" [value]="club.id">{{club.nameAr}}</option>
              </select>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label for="clubATeam">Select Club A Team</label>
              <select class="form-control" id="clubATeam" [(ngModel)]="matchesService.match.teamAId"
                      #teamAId="ngModel"
                      name="teamAId">
                <option>Please Select Club A Team</option>
                <option *ngFor="let team of allTeamsA" [value]="team.id">{{team.nameAr}}</option>
              </select>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label for="clubB">Select Club B</label>
              <select class="form-control" id="clubB" #selectedClubB (change)="getAllTeams(selectedClubB.value, false)">
                <option disabled>Please Select Club B</option>
                <option *ngFor="let club of allClubs" [value]="club.id">{{club.nameAr}}</option>
              </select>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label for="clubBTeam">Select Club B Team</label>
              <select class="form-control" id="clubBTeam" [(ngModel)]="matchesService.match.teamBId"
                      #teamBId="ngModel"
                      name="teamBId">
                <option>Please Select Club B Team</option>
                <option *ngFor="let team of allTeamsB" [value]="team.id">{{team.nameAr}}</option>
              </select>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12">
            <button type="submit" class="btn btn-outline-primary float-right" (click)="getAllPlayers()" matStepperNext>
              <i
                class="far fa-hand-point-right"></i> Next Step
            </button>
          </div>
        </div>
      </form>
    </mat-step>
    <mat-step>
      <form>
        <ng-template matStepLabel>Team A Players</ng-template>
        <div class="form-group">
          <p-pickList [source]="allPlayersA" [target]="targetPlayerA" sourceHeader="Team A"
                      targetHeader="Selected Players"
                      [responsive]="true" filterBy="nameAr"
                      dragdrop="true" sourceFilterPlaceholder="Search by name"
                      targetFilterPlaceholder="Search by brand" [sourceStyle]="{'height':'300px'}"
                      [targetStyle]="{'height':'300px'}">
            <ng-template let-playersA pTemplate="item">
              <div class="ui-helper-clearfix">
                <!--                <img src="assets/showcase/images/demo/car/{{playersA.brand}}.png"-->
                <!--                     style="display:inline-block;margin:2px 0 2px 2px" width="48">-->
                <div style="font-size:14px;float:right;margin:15px 5px 0 0px">{{playersA.nameAr}} </div>
              </div>
            </ng-template>
          </p-pickList>
        </div>
        <div class="row">
          <div class="col-md-6 float-left">
            <button type="submit" class="btn btn-outline-secondary" matStepperPrevious><i
              class="far fa-hand-point-left"></i> Previous Step
            </button>
          </div>
          <div class="col-md-6 ">
            <button type="submit" class="btn btn-outline-primary float-right" (click)="addFormation(true)"
                    matStepperNext><i
              class="far fa-hand-point-right"></i> Next Step
            </button>
          </div>
        </div>
      </form>
    </mat-step>
    <mat-step>
      <form>
        <ng-template matStepLabel>Team B Players</ng-template>
        <div class="form-group">
          <p-pickList [source]="allPlayersB" [target]="targetPlayerB" sourceHeader="Team B"
                      targetHeader="Selected Players"
                      [responsive]="true" filterBy="nameAr"
                      dragdrop="true" sourceFilterPlaceholder="Search by name"
                      targetFilterPlaceholder="Search by brand" [sourceStyle]="{'height':'300px'}"
                      [targetStyle]="{'height':'300px'}">
            <ng-template let-playerB pTemplate="item">
              <div class="ui-helper-clearfix">
                <!--                <img src="assets/showcase/images/demo/car/{{car.brand}}.png"-->
                <!--                     style="display:inline-block; margin:2px 0 2px 2px;" width="48">-->
                <div style="font-size:14px; float:right; margin:15px 5px 0 0;">{{playerB.nameAr}}</div>
              </div>
            </ng-template>
          </p-pickList>
        </div>
        <div class="row">
          <div class="col-md-6 float-left">
            <button type="submit" class="btn btn-outline-secondary" matStepperPrevious><i
              class="far fa-hand-point-left"></i> Previous Step
            </button>
          </div>
          <div class="col-md-6 ">
            <button type="submit" class="btn btn-outline-primary float-right" (click)="addFormation(false)"
                    matStepperNext><i
              class="far fa-hand-point-right"></i> Next Step
            </button>
          </div>
        </div>
      </form>
    </mat-step>
    <mat-step>
      <form>
        <ng-template matStepLabel>Youtube URL</ng-template>
        <div class="row">
          <div class="col-md-12">
            <button class="btn btn-outline-primary" (click)="addNewYoutubeInput()"> Add</button>
          </div>
          <div class="col-md-12" *ngFor="let x of matchesService.match.matchVideos; let i = index">
            <div class="row">
              <div class="col-md-10">
                <div class="form-group">
                  <label for="Youtube Link">Youtube Link</label>
                  <input type="text" class="form-control" id="Youtube Link"
                         [(ngModel)]="matchesService.match.matchVideos[i].path"
                         #matchVideos="ngModel"
                         name="matchVideos"
                         placeholder="Please Enter Youtube Link">
                </div>
              </div>
              <div class="col-md-2">
                <button class="btn btn-outline-danger" (click)="deleteYoutubeInput(i)"> Delete</button>
              </div>
            </div>

          </div>
        </div>
        <div class="row">
          <div class="col-md-6 float-left">
            <button type="submit" class="btn btn-outline-secondary" matStepperPrevious><i
              class="far fa-hand-point-left"></i> Previous Step
            </button>
          </div>
          <div class="col-md-6">
            <button type="submit" class="btn btn-outline-primary float-right" matStepperNext><i
              class="far fa-hand-point-right"></i> Next Step
            </button>
          </div>
        </div>
      </form>
    </mat-step>
    <mat-step>
      <ng-template matStepLabel>Final</ng-template>
      <br>
      <h4 class="display-4 text-center text-success"> You Are Now Done. <i
        class="far fa-handshake animated swing infinite"></i>
      </h4>
      <h4 class="display-4 text-center text-primary"> Are You Ready To Start? <i
        class="fas fa-chart-line animated pulse infinite"></i>
      </h4>
      <br>
      <hr>
      <div class="row">
        <div class="col-md-4">
          <button type="submit" class="btn btn-outline-secondary" matStepperPrevious><i
            class="far fa-hand-point-left"></i> Previous Step
          </button>
        </div>
        <div class="col-md-4 text-center">
          <button class="btn btn-outline-success " (click)="onSubmit(); this.displayNewAnalysis = false"
                  ><i
            class="far fa-hand-peace"></i> Lets Start
          </button>
        </div>
        <div class="col-md-4">
          <button class="btn btn-outline-danger float-right" (click)="displayNewAnalysis=false;stepper.reset()"><i
            class="far fa-window-close"></i> Cansel
          </button>
        </div>
      </div>
    </mat-step>
  </mat-horizontal-stepper>
</p-dialog>
